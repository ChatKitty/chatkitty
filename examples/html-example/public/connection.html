<html>
<body>
<script src='https://cdn.chatkitty.com/lib.js'></script>
<div id='chat-ui'></div>
<script type="module">
    const {connectApi, loadChatUi} = ChatKitty

    const widgetId = 'UWiEkKvdAaUJ1xut';
    const apiKey = 'afaac908-1db3-4b5c-a7ae-c040b9684403';
    const username = '2989c53a-d0c5-4222-af8d-fbf7b0c74ec6';

    const connection = await connectApi({
        apiKey: apiKey,
        username: username,
    });

    const {user} = connection;

    console.log('Connected as user:', user.value);

    // Set event listeners if needed
    user.watch((user) => console.log('User updated:', user));

    loadChatUi({widgetId}, {connection})

    setTimeout(async () => {
        console.log('Disposing connection...');

        await connection.dispose()
    }, 60000); // Dispose after a minute for demo purposes
</script>
</body>
</html>
